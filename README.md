# RAG Learning Tasks Assistant

<p align="center">
  <img src="https://img.shields.io/badge/python-3.9+-blue?logo=python" alt="Python" />
  <img src="https://img.shields.io/badge/FastAPI-ready-099a8f?logo=fastapi" alt="FastAPI" />
  <img src="https://img.shields.io/badge/React-18-61dafb?logo=react" alt="React" />
  <img src="https://img.shields.io/badge/Qdrant-powered-f05b7a?logo=qdrant" alt="Qdrant" />
  <img src="https://img.shields.io/badge/docker-compose-‚úì-2496ed?logo=docker" alt="Docker Compose" />
</p>

> –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —É—á–µ–±–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç Retrieval Augmented Generation, –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –∏ ¬´—á–µ–ª–æ–≤–µ—á–Ω—ã–π¬ª —Ñ—Ä–æ–Ω—Ç, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ —á–∞—Ç—ã GPT.

---

## TL;DR

- **RAG-–ø–∞–π–ø–ª–∞–π–Ω**: –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ MongoDB/Qdrant, –∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ ‚Äî –≤ Postgres; Redis —Å—Ç—Ä–∏–º–∏—Ç —Å–æ–±—ã—Ç–∏—è, –≥–æ—Ç–æ–≤—ã–µ –∫ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
- **–°—Ç–µ–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â**: Postgres, MongoDB, Redis, Qdrant –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ Neo4j (–≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫—É—Ä—Å–∞).
- **FastAPI-—á—É–ª–æ–∫**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π backend (`scripts/api.py`) –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `embed_text`, –¥–µ–ª–∞–µ—Ç retrieval –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Markdown-–æ—Ç–≤–µ—Ç. –ü—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º LLM-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é (llama.cpp).
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: Vite + React –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –¥–≤—É–º—è —Ç–µ–º–∞–º–∏, –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –∫–Ω–æ–ø–∫–∞–º–∏ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ Markdown-—Ä–µ–Ω–¥–µ—Ä–æ–º –æ—Ç–≤–µ—Ç–æ–≤ –ø–ª—é—Å –º–∏–Ω–∏-–≥—Ä–∞—Ñ —Ç–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ Neo4j.
- **–õ–æ–∫–∞–ª—å–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏**: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `sentence-transformers/all-MiniLM-L6-v2`, –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –º–æ–¥–µ–ª—å –≤ `.env`.
- **Docker first**: –≤—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø–∏—Å–∞–Ω–∞ –≤ `docker-compose.yml` –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π, –Ω–∏–∫–∞–∫–æ–π —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PostgreSQL.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
flowchart TD
    subgraph Ingestion
        A[materials.json] -->|scripts.ingest| B(PostgreSQL)
        A --> C[MongoDB]
        A --> D[Qdrant]
        D -->|point id| B
        A --> E[Redis Streams]
    end
    subgraph RAG API
        F[FastAPI /scripts/api.py] -->|embed_text| D
        F -->|joins| B
        F -->|sample prompts| UI
    end
    subgraph UI
        UI[React GPT-like Chat] -->|fetch /api/chat| F
        UI -->|example hints| F
    end
    subgraph Optional
        G[Neo4j] -.-> F
    end
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–æ–ª–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç      | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω                                                                                  |
| -------------- | --------------------------------------------------------------------------------------------- |
| PostgreSQL     | –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è, —Å—Ç–∞—Ç—É—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–µ–∫—Ç–æ—Ä—ã, –æ—Ç—á—ë—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.             |
| MongoDB        | –î–æ–∫—É–º–µ–Ω—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–º–µ—Ç–æ–¥–∏—á–∫–∏, –∑–∞–º–µ—Ç–∫–∏, –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤), –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.     |
| Redis          | –ö–µ—à–∏ –∏ –±—ã—Å—Ç—Ä–∞—è —Å–æ–±—ã—Ç–∏–π–Ω–∞—è —à–∏–Ω–∞ (`stream:ingest`) –¥–ª—è –ø–∞–π–ø–ª–∞–π–Ω–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤.                   |
| Qdrant         | –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `course_materials`) —Å COSINE-–º–µ—Ç—Ä–∏–∫–æ–π –∏ HNSW-–ø–æ–∏—Å–∫–æ–º.       |
| Neo4j (–æ–ø—Ü.)   | –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫—É—Ä—Å–∞: –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–º–µ—à–∏–≤–∞—Ç—å —Å–æ—Å–µ–¥–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –≤ –ø—Ä–æ–º–ø—Ç.                  |
| FastAPI        | –õ—ë–≥–∫–∏–π REST-—Å–ª–æ–π: `/api/chat`, `/api/examples`, `/healthz`.                                  |
| React UI       | –ß–∞—Ç –≤ —Å—Ç–∏–ª–µ GPT —Å —Å–≤–µ—Ç–ª–æ–π/—Ç—ë–º–Ω–æ–π —Ç–µ–º–∞–º–∏, –ø—Ä–∏–º–µ—Ä–∞–º–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.         |

### –ü–æ—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–∞ (RAG)

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –≤–æ–ø—Ä–æ—Å –≤–æ —Ñ—Ä–æ–Ω—Ç–µ ‚Üí `/api/chat`.
2. FastAPI —ç–º–±–µ–¥–¥–∏—Ç –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –≤—ã–±—Ä–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å (`sentence-transformers` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏ –∏—â–µ—Ç –≤ Qdrant (COSINE).
3. –ü–æ `document_id` –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ chunk –∏–∑ PostgreSQL.
4. –°–æ–±–∏—Ä–∞–µ—Ç Markdown-–æ—Ç–≤–µ—Ç: —Å–µ–∫—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –Ω–∞—Ö–æ–¥–∫–∞–º–∏, –∑–∞—Ç–µ–º –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å —Ü–∏—Ç–∞—Ç–∞–º–∏.
5. UI —Ä–µ–Ω–¥–µ—Ä–∏—Ç –æ—Ç–≤–µ—Ç (–ª–∏–±–æ Markdown, –ª–∏–±–æ —Ç–µ–∫—Å—Ç –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π LLM) –∏ –º–∏–Ω–∏-–≥—Ä–∞—Ñ Neo4j —Å —Å–æ—Å–µ–¥–Ω–∏–º–∏ —Ç–µ–º–∞–º–∏.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
-RAG-system/
‚îú‚îÄ‚îÄ data/               # materials.json ‚Äì –∏—Å—Ö–æ–¥–Ω—ã–µ —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
‚îú‚îÄ‚îÄ frontend/           # Vite + React —á–∞—Ç
‚îú‚îÄ‚îÄ infra/postgres/     # SQL-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Postgres
‚îú‚îÄ‚îÄ scripts/            # ingest/search/api
‚îú‚îÄ‚îÄ docker-compose.yml  # –≤–µ—Å—å —Å—Ç–µ–∫ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ requirements.txt    # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ RUN.md              # –ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ (docker + —Å–∫—Ä–∏–ø—Ç—ã + —Ñ—Ä–æ–Ω—Ç)
‚îî‚îÄ‚îÄ README.md           # –≤—ã –∑–¥–µ—Å—å
```

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

0. **–°–∫–æ–ø–∏—Ä—É–π .env**  
   ```bash
   cp .env.example .env
   # –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π –∑–Ω–∞—á–µ–Ω–∏—è OPENAI_API_KEY, EMBEDDING_PROVIDER –∏ —Ç.–¥.
   ```
   Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç `.env` (—á–µ—Ä–µ–∑ `python-dotenv`), –ø–æ—ç—Ç–æ–º—É –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —ç—Ç–æ—Ç —Ñ–∞–π–ª.

1. **–ü–æ–¥–Ω–∏–º–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É**
   ```bash
   docker compose up -d
   ```
   –≠—Ç–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç Postgres, MongoDB, Redis, Qdrant –∏ Neo4j. –ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–ª —Ä–∞–Ω—å—à–µ ‚Äî `docker compose down -v` –æ—á–∏—Å—Ç–∏—Ç —Ç–æ–º–∞.

2. **–ü–æ–¥–≥–æ—Ç–æ–≤—å Python-–æ–∫—Ä—É–∂–µ–Ω–∏–µ**
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```

3. **–ó–∞–≥—Ä—É–∑–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –≤–µ–∫—Ç–æ—Ä—ã**
   ```bash
   python -m scripts.ingest
   ```
   –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –∑–∞–ø–∏—Å–∏ –≤ Postgres, –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ Mongo, –≤–µ–∫—Ç–æ—Ä—ã –≤ Qdrant, —Å–≤—è–∑–∏ –≤ Neo4j –∏ —Å–æ–±—ã—Ç–∏—è –≤ Redis Streams. –ù–∞ –≤—ã—Ö–æ–¥–µ —É–≤–∏–¥–∏—à—å `Inserted <n> chunks...`.

4. **–ü—Ä–æ–≤–µ—Ä—å –ø–æ–∏—Å–∫ –∏–∑ CLI**
   ```bash
   python -m scripts.search "–ø–∞–π–ø–ª–∞–π–Ω RAG"
   ```

5. **–ó–∞–ø—É—Å—Ç–∏ API + —Ñ—Ä–æ–Ω—Ç**
   ```bash
   # Backend
   CHAT_CHUNK_LIMIT=6 uvicorn scripts.api:app --reload --host 0.0.0.0 --port 8000

   # Frontend
   cd frontend
   npm install
   VITE_API_URL="http://localhost:8000" VITE_CHUNK_LIMIT=6 npm run dev
   ```
   –û—Ç–∫—Ä–æ–π `http://localhost:5173` –∏ –∑–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å ‚Äî –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º Markdown –∏ –ø–æ–∫–∞–∂–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏.

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Å –¥–æ–ø. –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ ‚Äî –≤ [`RUN.md`](RUN.md).

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏ LLM

### –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ (sentence-transformers)

–ü—Ä–æ–µ–∫—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ sentence-transformers. –í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ:

```bash
pip install -r requirements.txt               # –ø–æ–¥—Ç—è–Ω–µ—Ç sentence-transformers
cp .env.example .env                          # –µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–ª

# –≤ .env
EMBEDDING_PROVIDER=huggingface
EMBEDDING_DIM=384                             # –¥–ª—è all-MiniLM-L6-v2
HUGGINGFACE_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

python -m scripts.ingest                      # –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë–º –∫–æ–ª–ª–µ–∫—Ü–∏—é Qdrant
```

–¢–µ–ø–µ—Ä—å `embed_text` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å (CPU/Metal). –ú–æ–∂–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å –∏–∑ HuggingFace Hub ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è–π `HUGGINGFACE_EMBEDDING_MODEL` –∏ `EMBEDDING_DIM`. –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, —Å–µ—Ä–≤–∏—Å –æ—Ç–∫–∞—Ç–∏—Ç—Å—è –Ω–∞ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ `fake_embed`, —á—Ç–æ–±—ã –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –ø–∞–¥–∞–ª–∏.

### –õ–æ–∫–∞–ª—å–Ω–∞—è LLM (llama.cpp)

–ß—Ç–æ–±—ã –æ—Ç–≤–µ—Ç—ã –±—ã–ª–∏ –±–ª–∏–∂–µ –∫ GPT:

1. –°–∫–∞—á–∞–π GGUF-–º–æ–¥–µ–ª—å (–ø—Ä–∏–º–µ—Ä):  
   ```bash
   mkdir -p models
   curl -L -o models/phi-3-mini-4k-instruct-q4.gguf \
     https://huggingface.co/microsoft/Phi-3-mini-4k-instruct-gguf/resolve/main/Phi-3-mini-4k-instruct-q4.gguf
   ```
2. –í `.env` –ø—Ä–æ–ø–∏—à–∏:
   ```
   LLM_PROVIDER=llama
   LLAMA_MODEL_PATH=./models/phi-3-mini-4k-instruct-q4.gguf
   LLAMA_THREADS=6             # –ø–æ–¥–±–µ—Ä–∏ –ø–æ–¥ —Å–≤–æ—é –º–∞—à–∏–Ω—É
   LLAMA_GPU_LAYERS=0          # –æ—Å—Ç–∞–≤—å 0, –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—à—å –Ω–∞ CPU
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ API: `CHAT_CHUNK_LIMIT=6 uvicorn scripts.api:app --reload ...`

–¢–µ–ø–µ—Ä—å `_build_llm_answer` –≤—ã–∑—ã–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å —á–µ—Ä–µ–∑ `llama-cpp-python`. –ï—Å–ª–∏ LLM –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å –∏–ª–∏ –≤—ã—à–ª–∞ –æ—à–∏–±–∫–∞, backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ Markdown-—Ñ–æ–ª–ª–±–µ–∫—É.

---

## –°–∫—Ä–∏–ø—Ç—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞                                 | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                           |
| --------------------------------------- | ---------------------------------------------------- |
| `python -m scripts.ingest`              | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–∑ `data/materials.json`.        |
| `python -m scripts.search "<query>"`    | –õ–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ Qdrant + Postgres.               |
| `uvicorn scripts.api:app --reload`      | –ó–∞–ø—É—Å–∫–∞–µ—Ç FastAPI (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è). |
| `npm run dev` (–≤ `frontend/`)           | –ü–æ–¥–Ω–∏–º–∞–µ—Ç React/Vite UI.                            |
| `npm run build && npm run preview`      | –°–æ–±–∏—Ä–∞–µ—Ç –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç production-–≤–µ—Ä—Å–∏—é UI.      |

---

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è        | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é                                 | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
| ----------------- | --------------------------------------------- | ----------------------------------------- |
| `POSTGRES_DSN`    | `postgresql://rag:ragpass@localhost:5432/rag` | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Postgres.                   |
| `MONGODB_URI`     | `mongodb://localhost:27017`                   | MongoDB.                                  |
| `REDIS_URL`       | `redis://localhost:6379/0`                    | Redis Streams/–∫–µ—à.                        |
| `QDRANT_HOST/PORT`| `localhost` / `6333`                          | –•–æ—Å—Ç/–ø–æ—Ä—Ç Qdrant.                         |
| `QDRANT_COLLECTION` | `course_materials`                         | –ö–æ–ª–ª–µ–∫—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤.                       |
| `EMBEDDING_DIM`   | `384`                                         | –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º). |
| `EMBEDDING_PROVIDER` | `huggingface`                              | `huggingface` –∏–ª–∏ `fake`.                 |
| `HUGGINGFACE_EMBEDDING_MODEL` | `sentence-transformers/all-MiniLM-L6-v2` | –ú–æ–¥–µ–ª—å sentence-transformers.        |
| `NEO4J_URI` / `NEO4J_USER` / `NEO4J_PASSWORD` | `bolt://localhost:7687` / `neo4j` / `neo4jpass` | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≥—Ä–∞—Ñ—É —Ç–µ–º. |
| `LLM_PROVIDER`    | `llama`                                      | `llama` –∏–ª–∏ `local` (Markdown fallback). |
| `LLAMA_MODEL_PATH`| `./models/phi-3-mini-4k-instruct-q4.gguf`    | –ü—É—Ç—å –∫ GGUF-–º–æ–¥–µ–ª–∏.                      |
| `LLAMA_CTX_SIZE`  | `4096`                                       | –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è llama.cpp.          |
| `LLAMA_THREADS`   | `4`                                          | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ CPU.                  |
| `LLAMA_GPU_LAYERS`| `0`                                          | –°–ª–æ–∏ –Ω–∞ GPU (–æ—Å—Ç–∞–≤—å 0 –ø—Ä–∏ CPU-—Ä–µ–∂–∏–º–µ).   |
| `LLAMA_MAX_TOKENS`| `512`                                        | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è LLM.           |
| `LLAMA_TEMPERATURE` | `0.2`                                      | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.                   |
| `INGEST_STREAM`   | `stream:ingest`                               | –ö–ª—é—á –¥–ª—è Redis Streams.                   |
| `CHAT_CHUNK_LIMIT`| `6`                                           | –°–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç API (–¥–æ 8).|
| `VITE_API_URL`    | `http://localhost:8000`                       | Endpoint backend‚Äôa –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞.            |
| `VITE_CHUNK_LIMIT`| `6`                                           | –°–∫–æ–ª—å–∫–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ UI –ø—Ä–æ—Å–∏—Ç —É API.      |

---

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

- **`permission denied for table assignments`** ‚Äî –ø–æ–¥–Ω–∏–º–∏ —Å—Ç–µ–∫ —Å —á–∏—Å—Ç—ã–º–∏ —Ç–æ–º–∞–º–∏: `docker compose down -v && docker compose up -d`, –∑–∞—Ç–µ–º `scripts.ingest`.
- **Qdrant –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** (`[Errno 61] Connection refused`) ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å `docker compose ps`, –∑–∞–ø—É—Å—Ç–∏ —Å–Ω–æ–≤–∞ –∏ –∑–∞–Ω–æ–≤–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ.
- **`ModuleNotFoundError: No module named 'scripts'`** ‚Äî –∑–∞–ø—É—Å–∫–∞–π —Å–∫—Ä–∏–ø—Ç—ã –º–æ–¥—É–ª–µ–º (`python -m scripts.ingest`).
- **–ü—É—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã 404** ‚Äî –≤ Qdrant –Ω–µ—Ç —Ç–æ—á–µ–∫; –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ ingest –∏ —É–±–µ–¥–∏—Å—å, —á—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ (`scripts.ingest` —Å–∞–º –≤—ã–∑—ã–≤–∞–µ—Ç `ensure_collection`).

---

## –ò–¥–µ–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

- –ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤/LLM –≤–º–µ—Å—Ç–æ `fake_embed`.
- –ó–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å SSE/WebSocket –¥–ª—è ¬´–∂–∏–≤—ã—Ö¬ª –æ—Ç–≤–µ—Ç–æ–≤ –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≥—Ä–∞—Ñ–æ–≤—É—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∏–Ω–∏-–∫–∞—Ä—Ç—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π).
- –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –ø—Ä–æ—Ñ–∏–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏.
- –°—Ç—Ä–∏–º–∏—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –≤ UI —á–µ—Ä–µ–∑ Server-Sent Events/WebSocket.
- –í—Å—Ç—Ä–æ–∏—Ç—å Neo4j-–≥—Ä–∞—Ñ –≤ –æ—Ç–≤–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å prerequisite-–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏).
- –ó–∞–≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë –≤ –æ–¥–∏–Ω compose-—Å–µ—Ä–≤–∏—Å (backend + frontend) –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–µ–ø–ª–æ—è.

---

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –ª—é–±–∏—Ç —Å–æ–≤–º–µ—â–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, LLM –∏ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏/—Ñ–∏—á–∏ ‚Äî —Å–º–µ–ª–æ –æ—Ç–∫—Ä—ã–≤–∞–π issue –∏–ª–∏ –ø–∏—à–∏ –≤ —á–∞—Ç! –ü–æ–∫–∞ —á—Ç–æ –≤—Å—ë –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–∂–µ –≥–æ—Ç–æ–≤–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é. üöÄ
